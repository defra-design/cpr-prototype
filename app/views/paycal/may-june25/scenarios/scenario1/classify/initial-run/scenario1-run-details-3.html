{% set serviceName = "Run the fees and payments calculator" %}

{% extends "layout.html" %}

{% block pageTitle %}
{{serviceName}} prototype
{% endblock %}
{% block content %}

<style>
  .govuk-radios__label {
    padding: 0px 15px 11px 10px;
  }
</style>


<div class="govuk-grid-row">
  <div class="govuk-grid-column-one-half">
    <a class="govuk-back-link" href="calculate-packaging-payments">Back</a>
  </div>

  <div class="govuk-body account-info govuk-grid-column-one-half">
    <div class="alignname" style="margin-right: 15px;">
      <span class="your-name" id="bannerUserName">Steve Jones</span><a class="account-link" href="details"
        id="signout-link">Sign out</a>
    </div>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

  </div>
</div>


<div class="govuk-grid-row">

  <div class="govuk-grid-column-two-thirds">
    <br>
    <div class="govuk-form-group">
      <fieldset class="govuk-fieldset" aria-describedby="approval-code-hint">
        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset" aria-describedby="approval-code-hint">
            <span class="govuk-caption-l">Calculation run 99</span>
            <h1 class="govuk-heading-l">Calculation run details</h1>

            <hr class="govuk-section-break govuk-section-break--s govuk-section-break--invisible">

            <table class="govuk-table">
              <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">Financial year</th>
                  <td class="govuk-table__cell">2024-25</td>
                </tr>
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">Classification</th>
                  <td class="govuk-table__cell">Initial run</td>
                </tr>
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">Calculation ID</th>
                  <td class="govuk-table__cell">240008</td>
                </tr>
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">Run date and time</th>
                  <td class="govuk-table__cell">21 June 2024 at 12:09</td>
                </tr>
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">Run by</th>
                  <td class="govuk-table__cell">Steve Jones</td>
                </tr>
              </tbody>
            </table>
            <h2 class="govuk-heading-m">Downloads</h2>
            <p class="govuk-body">Download files related to this calculation run.</p>

            <div class="download-block">
              <a id="download-results" href="#" class="govuk-button govuk-button--secondary" role="button">
                Results file
              </a>
              <p id="status-results" class="govuk-body" style="display: none; margin-bottom: 40px;">
                <strong>Downloading...</strong> Please wait while we prepare your file.
              </p>
            </div>

            <div class="download-block">
              <a id="download-draft" href="#" class="govuk-button govuk-button--secondary" role="button">
                Draft billing file
              </a>
              <p id="status-draft" class="govuk-body" style="display: none; margin-bottom: 40px;">
                <strong>Downloading...</strong> Please wait while we prepare your file.
              </p>
            </div>

            <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
            <h2 class="govuk-heading-m">Remove this run's classification</h2>
            <p class="govuk-body">Mark this run as a test or delete it to remove its classification.</p>

            <div class="govuk-button-group">
              <a href="remove-initial-run-classification" class="govuk-button govuk-button--secondary"
                style="display: inline;">Remove classification</a>
            </div>
            <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

            <h2 class="govuk-heading-m">Next step</h2>

            <p class="govuk-body">Confirm that you want to send the billing file to the FSS. </p>

            <div class="govuk-warning-text">
              <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
              <strong class="govuk-warning-text__text">
                <span class="govuk-visually-hidden">Warning</span>
                Once sent, you will not be able to amend the billing file.
              </strong>
            </div>

            <div class="govuk-button-group"><a href="send-billing-file" class="govuk-button show-continue"
                style="display: inline;">
                Continue
              </a>

              <a class="govuk-link"
                href="../../classify/initial-run/scenario1-dashboard-0-initial-run-classified.html">Return to
                dashboard</a>

            </div>




          </fieldset>

        </div>

        {% from "govuk/components/details/macro.njk" import govukDetails %}





    </div>

    </form>
  </div>
</div>
</div>
</div>

<script>
  function simulateDownload(buttonId, statusId, filename) {
    const button = document.getElementById(buttonId);
    const status = document.getElementById(statusId);

    button.addEventListener('click', function (event) {
      event.preventDefault();
      status.style.display = 'block';
      status.innerHTML = `<strong>Downloading...</strong> Please wait while we prepare your file.`;

      setTimeout(() => {
        status.innerHTML = `
          <strong>âœ” Download complete.</strong> Your file has been saved. <br><br>
          <a href="/downloads/${filename}" target="_blank" style="margin-left: 10px;">View ${filename}</a>
        `;
      }, 2000);
    });
  }

  simulateDownload('download-results', 'status-results', 'results-file.csv');
  simulateDownload('download-draft', 'status-draft', 'draft-billing-file.csv');
</script>

{% endblock %}